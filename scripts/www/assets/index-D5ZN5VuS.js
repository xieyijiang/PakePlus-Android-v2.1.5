
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{d as G,aa as K,ag as U,e as p,ah as Y,i as P,Y as Q,E as X,O as Z,ai as C,f as $,j as ee,_ as te,aj as ae,s as i,o as n,t as o,J as j,x as s,p as k,K as I,ae as B,r as x,v as d,F as re,H as f,w as T,G as se,ak as M,n as N,g as z,T as H,al as ne,a as A}from"./index-oMllnZjX.js";const oe=G({name:"FmPageLayout",__name:"index",props:{titleCenter:{type:Boolean,required:!1,default:!0},navbar:{type:Boolean,required:!1,default:void 0},navbarBorder:{type:Boolean,required:!1,default:!0},navbarClass:{type:null,required:!1},tabbar:{type:Boolean,required:!1,default:void 0},tabbarBorder:{type:Boolean,required:!1,default:!0},tabbarClass:{type:null,required:!1},contentClass:{type:null,required:!1},copyright:{type:Boolean,required:!1,default:void 0},backTop:{type:Boolean,required:!1,default:void 0}},emits:["scroll","reachTop","reachBottom"],setup(b,{expose:h,emit:a}){const e=a,w=K(),y=U(),l=p("layoutRef"),{y:R,arrivedState:g}=Y(l);P(Q(g),r=>{r.top&&e("reachTop"),r.bottom&&e("reachBottom")},{deep:!0}),h({ref:l});function _(r){e("scroll",r)}const v=p("startSideRef"),u=p("endSideRef"),t=X(0),c=CSS.supports("width","round(up, 1.01px, 1px)");Z(()=>{const{width:r}=C(v,void 0,{box:"border-box"}),{width:m}=C(u,void 0,{box:"border-box"});P([r,m],S=>{t.value=Math.max(...S)},{immediate:!0})});const q=p("navbarRef"),{height:V}=C(q,void 0,{box:"border-box"}),E=$(()=>y.settings.tabbar.list.length>0?y.settings.tabbar.list:[]),F=p("tabbarRef"),{height:O}=C(F,void 0,{box:"border-box"});function D(r){var m,S,L;return w.fullPath===r.path?(S=(m=r.activeIcon)!=null?m:r.icon)!=null?S:void 0:(L=r.icon)!=null?L:void 0}function J(){var r;(r=l.value)==null||r.scrollTo({top:0,behavior:"smooth"})}const W={emits:e,route:w,settingsStore:y,layoutRef:l,y:R,arrivedState:g,handleMainScroll:_,startSideRef:v,endSideRef:u,sideWidth:t,isSupprotRound:c,navbarRef:q,navbarHeight:V,tabbarList:E,tabbarRef:F,tabbarHeight:O,getIcon:D,handleBackTopClick:J,get cn(){return ee}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),ie={class:"min-h-[var(--g-navbar-min-height)] w-full flex-center"},le={ref:"startSideRef",class:"h-full flex-center whitespace-nowrap"},ce={class:"h-full flex-center whitespace-nowrap px-2 empty:hidden"},de={class:"truncate"},be={ref:"endSideRef",class:"h-full flex-center whitespace-nowrap"},he={class:"h-full flex-center whitespace-nowrap px-2 empty:hidden"},fe={key:0,class:"copyright relative flex flex-wrap items-center justify-center p-4 text-sm text-primary/50"},ge={key:0,class:"px-1"},ve=["href"],ue={key:1,class:"px-1"},pe={key:2,href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener",class:"px-1 text-center no-underline"},xe={class:"min-h-[var(--g-tabbar-min-height)] w-full flex-center px-4"},ye={key:1,class:"text-xs"};function _e(b,h,a,e,w,y){var g,_,v,u;const l=se,R=ae("RouterLink");return n(),i("div",{ref:"layoutRef",class:"relative h-vh flex flex-col overflow-auto overscroll-none supports-[(height:100dvh)]:h-dvh",style:B({"--g-navbar-height":"max(".concat(e.navbarHeight,"px, var(--g-navbar-min-height))"),"--g-tabbar-height":"max(".concat(e.tabbarHeight,"px, var(--g-tabbar-min-height))")}),onScroll:h[0]||(h[0]=t=>e.handleMainScroll(t))},[o(" Navbar "),j(s("header",{ref:"navbarRef",class:d(e.cn("navbar relative w-full flex-col-center bg-[var(--g-navbar-bg)] text-[var(--g-navbar-color)] transition-all pt-safe min-h+safe-t-[var(--g-navbar-min-height)]",{"shadow-[0_1px_0_0_hsl(var(--border))]":a.navbarBorder},a.navbarClass))},[s("div",ie,[s("div",{class:"h-full flex items-center justify-start",style:B({...a.titleCenter&&e.sideWidth&&{width:e.isSupprotRound?"round(up, ".concat(e.sideWidth,"px, 1px)"):"".concat(Math.ceil(e.sideWidth),"px")}})},[s("div",le,[s("div",ce,[x(b.$slots,"navbar-start",{},void 0,!0)])],512)],4),s("div",{class:d(["min-w-0 flex-1 text-sm",{"text-center":a.titleCenter}])},[s("div",de,[x(b.$slots,"navbar",{},()=>[re(f(e.settingsStore.title),1)],!0)])],2),s("div",{class:"h-full flex items-center justify-end",style:B({...a.titleCenter&&e.sideWidth&&{width:e.isSupprotRound?"round(up, ".concat(e.sideWidth,"px, 1px)"):"".concat(Math.ceil(e.sideWidth),"px")}})},[s("div",be,[s("div",he,[x(b.$slots,"navbar-end",{},void 0,!0)])],512)],4)])],2),[[I,(g=a.navbar)!=null?g:e.settingsStore.settings.navbar.enable]]),s("div",{class:d(e.cn("relative flex flex-1 flex-col transition-margin",{...((_=a.navbar)!=null?_:e.settingsStore.settings.navbar.enable)&&{"mt+safe-[var(--g-navbar-height)]":!0},...((v=a.tabbar)!=null?v:e.settingsStore.settings.tabbar.enable)&&{"mb+safe-[var(--g-tabbar-height)]":!0}},a.contentClass))},[x(b.$slots,"default",{},void 0,!0),o(" 版权信息 "),k(H,N(z({enterActiveClass:"ease-out",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"})),{default:T(()=>{var t;return[((t=a.copyright)!=null?t:e.settingsStore.settings.copyright.enable)?(n(),i("div",fe,[h[1]||(h[1]=s("span",{class:"px-1"},"Copyright",-1)),k(l,{name:"i-ri:copyright-line",class:"text-lg"}),e.settingsStore.settings.copyright.dates?(n(),i("span",ge,f(e.settingsStore.settings.copyright.dates),1)):o("v-if",!0),e.settingsStore.settings.copyright.company?(n(),i(M,{key:1},[e.settingsStore.settings.copyright.website?(n(),i("a",{key:0,href:e.settingsStore.settings.copyright.website,target:"_blank",rel:"noopener",class:"px-1 text-center no-underline"},f(e.settingsStore.settings.copyright.company),9,ve)):(n(),i("span",ue,f(e.settingsStore.settings.copyright.company),1))],64)):o("v-if",!0),e.settingsStore.settings.copyright.beian?(n(),i("a",pe,f(e.settingsStore.settings.copyright.beian),1)):o("v-if",!0)])):o("v-if",!0)]}),_:1},16)],2),o(" Tabbar "),j(s("footer",{ref:"tabbarRef",class:d(e.cn("tabbar flex-col-center bg-[var(--g-tabbar-bg)] transition-all pb-safe min-h+safe-b-[calc(var(--g-tabbar-min-height))]",{"shadow-[0_-1px_0_0_hsl(var(--border))]":a.tabbarBorder},a.tabbarClass))},[s("div",xe,[x(b.$slots,"tabbar",{},()=>[(n(!0),i(M,null,ne(e.tabbarList,t=>(n(),A(R,{key:JSON.stringify(t),class:d(["flex flex-1 flex-col items-center text-[var(--g-tabbar-color)] no-underline transition-all",{"text-[var(--g-tabbar-active-color)]!":e.route.fullPath===t.path}]),to:t.path,replace:""},{default:T(()=>{var c;return[e.getIcon(t)?(n(),A(l,{key:0,name:(c=e.getIcon(t))!=null?c:"",class:d(t.text?"text-6":"text-8")},null,8,["name","class"])):o("v-if",!0),t.text?(n(),i("div",ye,f(t.text),1)):o("v-if",!0)]}),_:2},1032,["class","to"]))),128))],!0)])],2),[[I,(u=a.tabbar)!=null?u:e.settingsStore.settings.tabbar.enable]]),o(" 返回顶部 "),k(H,N(z({enterActiveClass:"ease-out duration-300",enterFromClass:"opacity-0 translate-y-4",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"ease-in duration-200",leaveFromClass:"opacity-100 scale-100",leaveToClass:"opacity-0 scale-50"})),{default:T(()=>{var t,c;return[((t=a.backTop)!=null?t:e.settingsStore.settings.app.enableBackTop)&&e.y>=200?(n(),i("div",{key:0,class:d(["back-top size-12 flex-center cursor-pointer border rounded-full bg-background shadow-lg transition-all active:bg-border",{...((c=a.tabbar)!=null?c:e.settingsStore.settings.tabbar.enable)&&{"bottom+safe-[calc(var(--g-tabbar-height)+16px)]!":!0}}]),onClick:e.handleBackTopClick},[k(l,{name:"i-icon-park-outline:to-top-one",class:"text-6"})],2)):o("v-if",!0)]}),_:1},16)],36)}const Se=te(oe,[["render",_e],["__scopeId","data-v-7f8a901a"],["__file","/Users/crab7/develop/basic/src/ui/components/FmPageLayout/index.vue"]]);export{Se as _};
